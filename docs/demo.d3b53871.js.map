{"version":3,"sources":["../src/_arrToHTML.js","../src/_LooseArray.js","../src/_parsePasteEvent.js","../src/_shift.js","../src/_defaultCss.js","../src/index.js","demo.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["_arrToHTML","arr","table","document","createElement","setAttribute","navigator","language","forEach","row","tr","appendChild","cell","td","innerText","outerHTML","_LooseArray","x","y","val","hash","_data","cleanedVal","_cleanVal","_isEmpty","width","height","Math","max","parseInt","result","push","_getVal","toString","obj","Object","keys","length","_parsePasteEvent","event","html","clipboardData","window","getData","iframe","body","contentWindow","open","write","close","trs","querySelectorAll","data","Array","prototype","call","tds","text","removeChild","e","fromText","split","map","_shift","deltaX","xMin","xMax","yMin","yMax","Infinity","_defaultCss","Importabular","node","onChange","minRows","maxRows","minCols","maxCols","css","_editing","preventDefault","rows","_selection","rx","ry","offset","_setVal","_changeSelectedCellsStyle","_selectionStart","_selectionEnd","_onDataChanged","asArr","_getSelectionAsArray","setData","join","copy","_setAllSelectedCellsTo","ctrlKey","key","_revertEdit","_stopEditing","_tabCursorInSelection","shiftKey","_moveCursor","_focus","_startEditing","_getCell","firstChild","value","mobile","which","_selectionSize","range","Range","setStart","setEnd","cwd","getSelection","removeAllRanges","addRange","tbody","style","userSelect","_getCoords","_selecting","_endSelection","_lastMouseUp","Date","now","_lastMouseUpTarget","target","moved","input","removeEventListener","_blurIfEnter","_renderTDContent","code","keyCode","className","_classNames","div","tagName","_restyle","console","error","_parent","_options","_iframeStyle","border","background","_setupDom","_replaceDataWithArray","_incrementToFit","_fillScrollSpace","ceil","innerHeight","cols","innerWidth","_toArr","innerHTML","assign","_height","_width","_addCell","_events","name","addEventListener","_destroyEditing","parentElement","_fitBounds","children","_incrementWidth","_incrementHeight","_forSelectionCoord","_refreshDisplayedValue","shiftSelectionEnd","curr","nc","_scrollIntoView","horizontal","delta","selectionSize","temporaryCursor","scrollIntoView","behavior","block","tdSize","getBoundingClientRect","cellSize","type","focus","callback","oldS","_getSelectionCoords","reverse","cb","classes","getAttribute","_clear","line","sheet","getElementById","info","getElementsByClassName","n","pre","js","trim","replace","lines","match","l","i","slice","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","getBaseURL","url","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","module","OVERLAY_ID","OldModule","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","clear","hmrApply","v","hmrAcceptRun","reload","onclose","log","removeErrorOverlay","message","overlay","createErrorOverlay","stackTrace","getParents","modules","parents","k","d","dep","isArray","concat","Function","deps","cached","cache","some"],"mappings":"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","file":"demo.d3b53871.js","sourceRoot":"../demo","sourcesContent":["\nexport function _arrToHTML(arr) {\n  const table = document.createElement(\"table\");\n  table.setAttribute(\"lang\", navigator.language);\n  arr.forEach((row) => {\n    const tr = document.createElement(\"tr\");\n    table.appendChild(tr);\n    row.forEach((cell) => {\n      const td = document.createElement(\"td\");\n      tr.appendChild(td);\n      td.innerText = cell;\n    });\n  });\n  return `<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\"><html lang=\"${navigator.language}\"><head>\n<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\"/><title></title></head><body>${table.outerHTML}</body></html>`;\n}","\nexport class _LooseArray {\n  // An 2D array of strings that only stores non \"\" values\n  _data = {};\n\n  _setVal(x, y, val) {\n    const hash = this._data;\n    const cleanedVal = _cleanVal(val);\n    if (cleanedVal) {\n      if (!hash[x]) hash[x] = {};\n      hash[x][y] = cleanedVal;\n    } else {\n      // delete item\n      if (hash[x] && hash[x][y]) {\n        delete hash[x][y];\n        if (_isEmpty(hash[x])) delete hash[x];\n      }\n    }\n  }\n\n  _clear() {\n    this._data = {};\n  }\n\n  _getVal(x, y) {\n    const hash = this._data;\n    return (hash && hash[x] && hash[x][y]) || \"\";\n  }\n\n  _toArr() {\n    let width = 1,\n      height = 1;\n    for (let x in this._data) {\n      for (let y in this._data[x]) {\n        height = Math.max(height, parseInt(y) + 1);\n        width = Math.max(width, parseInt(x) + 1);\n      }\n    }\n    const result = [];\n    for (let y = 0; y < height; y++) {\n      result.push([]);\n      for (let x = 0; x < width; x++) {\n        result[y].push(this._getVal(x, y));\n      }\n    }\n    return result;\n  }\n}\n\nexport function _cleanVal(val) {\n  if (val === 0) return \"0\";\n  if (!val) return \"\";\n  return val.toString();\n}\n\nexport function _isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n}","\nexport function _parsePasteEvent(event) {\n  try {\n    const html = (event.clipboardData || window.clipboardData).getData(\n      \"text/html\"\n    );\n\n    const iframe = document.createElement(\"iframe\");\n    document.body.appendChild(iframe);\n    iframe.contentWindow.document.open();\n    iframe.contentWindow.document.write(html);\n    iframe.contentWindow.document.close();\n\n    const trs = iframe.contentWindow.document.querySelectorAll(\"tr\");\n    const data = [];\n    Array.prototype.forEach.call(trs, (tr, y) => {\n      const tds = tr.querySelectorAll(\"td\");\n      Array.prototype.forEach.call(tds, (td, x) => {\n        const text = td.innerText;\n        if (!data[y]) data[y] = [];\n        data[y][x] = text;\n      });\n    });\n\n    document.body.removeChild(iframe);\n    if (data.length) return data;\n  } catch (e) {}\n\n  const fromText = (event.clipboardData || window.clipboardData)\n    .getData(\"text\")\n    .split(/\\r\\n|\\n|\\r/)\n    .map((row) => row.split(\"\"));\n  return fromText;\n}","\n\n\nexport function _shift(x, y, deltaX, xMin, xMax, yMin, yMax) {\n  x += deltaX;\n  if (x < xMin) {\n    if (xMax === Infinity) {\n      return {x: xMin, y};\n    }\n    x = xMax;\n    y--;\n    if (y < yMin) {\n      if (yMax === Infinity) {\n        return {x: xMin, y: yMin};\n      }\n      y = yMax;\n    }\n  }\n  if (x > xMax) {\n    x = xMin;\n    y++;\n    if (y > yMax) {\n      y = yMin;\n      x = xMin;\n    }\n  }\n  return {x, y};\n}","export const _defaultCss = `\nhtml{\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n}\n::-webkit-scrollbar {\n  visibility: hidden;\n}\n*{\n  box-sizing: border-box;\n}\nbody{\n  padding: 0; \n  margin: 0;\n}\ntable{\n  border-spacing: 0;\n  background: white;\n  border: 1px solid #ddd;\n  border-width: 0 1px 1px 0;\n  font-size: 16px;\n  font-family: sans-serif;\n  border-collapse: separate;\n}\ntd{\n  padding:0;\n  border: 1px solid;\n  border-color: #ddd transparent transparent #ddd; \n}\ntd.selected.multi:not(.editing){\n  background:#d7f2f9;\n} \ntd.focus:not(.editing){\n  border-color: black;\n} \ntd>*{\n  border:none;\n  padding:10px;\n  min-width:100px;\n  min-height: 40px;\n  font:inherit;\n  line-height: 20px;\n  color:inherit;\n  white-space: normal;\n}\ntd>div::selection {\n    color: none;\n    background: none;\n}\n`;","/**\n * Spreadsheet component\n * @param {Object} options\n * @param {Array} options.data Initial data of the table, ie [['A1','A2'],['B1','B2']]\n * @param {Node} options.node Dom node to create the table into\n * @param {Node} options.onChange Callback to run whenever the data\n *               has changed, receives the new data as an argument.\n *@param {Number} options.minRows Minimum number of rows.\n *@param {Number} options.maxRows Maximum number of rows, the table will not grow vertically beyond this.\n *@param {Number} options.minCols Minimum number of columns.\n *@param {Number} options.maxCols Maximum number of columns, the table will not grow horizontally beyond this.\n *@param {String} options.css Css code to add inside the iframe.\n *\n *@param {Object} options.width Width of the iframe that will contain the table.\n *@param {Object} options.height Height of the iframe that will contain the table.\n *\n */\nimport {_arrToHTML} from \"./_arrToHTML\";\nimport {_LooseArray} from \"./_LooseArray\";\nimport {_parsePasteEvent} from \"./_parsePasteEvent\";\nimport {_shift} from \"./_shift\";\nimport {_defaultCss} from \"./_defaultCss\";\n\nexport default class Importabular {\n  constructor({\n    data = [],\n    node = null,\n    onChange = null,\n    minRows = 1,\n    maxRows = Infinity,\n    minCols = 1,\n    maxCols = Infinity,\n    css = \"\",\n    width = \"100%\",\n    height = \"80vh\",\n  }) {\n    if (!node)\n      return console.error(\n        \"Please call the constructor like this : new Importabular({node: document.body})\"\n      );\n    this._parent = node;\n    this._options = {\n      onChange,\n      minRows,\n      maxRows,\n      minCols,\n      maxCols,\n      css: _defaultCss + css,\n    };\n    this._iframeStyle = {\n      width,\n      height,\n      border: \"none\",\n      background: \"transparent\",\n    };\n    this._setupDom();\n    this._replaceDataWithArray(data);\n    this._incrementToFit({\n      x: this._options.minCols - 1,\n      y: this._options.minRows - 1,\n    });\n    this._fillScrollSpace();\n  }\n\n  /** @private {HTMLElement} Reference to the parent DOM element, contains the iframe. */\n  _parent = null;\n\n  /** @private {Number} Current number of columns of the table. */\n  _width = 1;\n\n  /** @private {Number} Current number of rows of the table. */\n  _height = 1;\n\n  /** @private {_LooseArray} Current content of the table, stored as 2D map.*/\n  _data = new _LooseArray();\n\n  /** @private Checks whether this cell should be editable, or if it's out of bounds*/\n  _fitBounds({ x, y }) {\n    return (\n      x >= 0 && x < this._options.maxCols && y >= 0 && y < this._options.maxRows\n    );\n  }\n\n  /** @private Fill the iframe visible window with empty cells*/\n  _fillScrollSpace() {\n    const rows = Math.ceil(this.iframe.contentWindow.innerHeight / 40);\n    const cols = Math.ceil(this.iframe.contentWindow.innerWidth / 100);\n    this._incrementToFit({ x: cols - 1, y: rows - 1 });\n  }\n\n  /** @private Runs the onchange callback*/\n  _onDataChanged() {\n    if (this._options.onChange) this._options.onChange(this._data._toArr());\n  }\n\n  /** @private Create a div with the cell content and correct style */\n  _renderTDContent(td, x, y) {\n    const div = document.createElement(\"div\");\n    td.setAttribute(\"x\", x.toString());\n    td.setAttribute(\"y\", y.toString());\n    const val = this._getVal(x, y);\n    if (val) {\n      div.innerText = val;\n    } else {\n      // Force no collapse of cell\n      div.innerHTML = \"&nbsp;\";\n    }\n    td.appendChild(div);\n    this._restyle({ x, y });\n  }\n\n  /** @private Initial dom setup */\n  _setupDom() {\n    // We wrap the table in an iframe mostly to let the browser\n    // handle the focus for us, without the need for a hidden\n    // input. It also makes sure that the style of the table is \"clean\"\n    // but makes it harder to style the content.\n    const iframe = document.createElement(\"iframe\");\n    this.iframe = iframe;\n    this._parent.appendChild(iframe);\n    const cwd = iframe.contentWindow.document;\n    this.cwd = cwd;\n    cwd.open();\n    cwd.write(\n      `<html lang=\"${navigator.language}\"><body><style>${this._options.css}</style></body></html>`\n    );\n    cwd.close();\n    Object.assign(iframe.style, this._iframeStyle);\n\n    const table = document.createElement(\"table\");\n    const tbody = document.createElement(\"tbody\");\n\n    table.appendChild(tbody);\n    cwd.body.appendChild(table);\n    this.tbody = tbody;\n    this.table = table;\n\n    for (let y = 0; y < this._height; y++) {\n      const tr = document.createElement(\"tr\");\n      tbody.appendChild(tr);\n      for (let x = 0; x < this._width; x++) {\n        this._addCell(tr, x, y);\n      }\n    }\n\n    this._events.forEach((name) =>\n      cwd.addEventListener(name, this[name], true)\n    );\n  }\n\n  /** @private All the events we listen to inside the iframe at the root level.\n   * Each one is mapped to the corresponding method on the instance. */\n  _events = [\n    \"mousedown\",\n    \"mouseenter\",\n    \"mouseup\",\n    \"mouseleave\",\n    \"touchstart\",\n    \"touchend\",\n    \"touchmove\",\n    \"keydown\",\n    \"paste\",\n    \"cut\",\n    \"copy\",\n  ];\n\n  /** Destroys the table, and clears even listeners\n   * @public\n   * */\n  destroy() {\n    this._destroyEditing();\n\n    this._events.forEach((name) =>\n      this.cwd.removeEventListener(name, this[name], true)\n    );\n\n    this.iframe.parentElement.removeChild(this.iframe);\n  }\n\n  /** @private Creates a TD, sets its content and adds it to the TR */\n  _addCell(tr, x, y) {\n    const td = document.createElement(\"td\");\n    tr.appendChild(td);\n    this._renderTDContent(td, x, y);\n  }\n\n  _incrementHeight() {\n    if (!this._fitBounds({ x: 0, y: this._height })) return false;\n    this._height++;\n    const y = this._height - 1;\n    const tr = document.createElement(\"tr\");\n\n    this.tbody.appendChild(tr);\n    for (let x = 0; x < this._width; x++) {\n      this._addCell(tr, x, y);\n    }\n    return true;\n  }\n\n  _incrementWidth() {\n    if (!this._fitBounds({ x: this._width, y: 0 })) return false;\n    this._width++;\n    const x = this._width - 1;\n    Array.prototype.forEach.call(this.tbody.children, (tr, y) => {\n      this._addCell(tr, x, y);\n    });\n    return true;\n  }\n  /** @private Makes the table bigger to contain a cell for those coordinates*/\n  _incrementToFit({ x, y }) {\n    while (x > this._width - 1 && this._incrementWidth());\n    while (y > this._height - 1 && this._incrementHeight());\n  }\n\n  /** @private Handles the paste event on the node.*/\n  paste = (e) => {\n    if (this._editing) return;\n    e.preventDefault();\n    const rows = _parsePasteEvent(e);\n    const { rx, ry } = this._selection;\n    const offset = { x: rx[0], y: ry[0] };\n\n    for (let y = 0; y < rows.length; y++)\n      // Using the first column here makes sure that\n      // if the paste data had various row length, we only\n      // paste a clean rectangle\n      for (let x = 0; x < rows[0].length; x++)\n        this._setVal(offset.x + x, offset.y + y, rows[y][x]);\n\n    this._changeSelectedCellsStyle(() => {\n      this._selectionStart = offset;\n      this._selectionEnd = {\n        x: offset.x + rows[0].length - 1,\n        y: offset.y + rows.length - 1,\n      };\n    });\n    this._onDataChanged();\n  };\n\n  /** @private Returns the currently selected cells as a 2D array of strings.*/\n  _getSelectionAsArray() {\n    const { rx, ry } = this._selection;\n    if (rx[0] === rx[1]) return null;\n    const width = rx[1] - rx[0];\n    const height = ry[1] - ry[0];\n    const result = [];\n    for (let y = 0; y < height; y++) {\n      result.push([]);\n      for (let x = 0; x < width; x++) {\n        result[y].push(this._getVal(rx[0] + x, ry[0] + y));\n      }\n    }\n    return result;\n  }\n\n  /** @private Called when the copy even happens in the iframe.*/\n  copy = (e) => {\n    if (this._editing) return;\n    const asArr = this._getSelectionAsArray();\n    if (asArr) {\n      e.preventDefault();\n      e.clipboardData.setData(\"text/html\", _arrToHTML(asArr));\n      e.clipboardData.setData(\n        \"text/plain\",\n        asArr.map((row) => row.join(\"\")).join(\"\\n\")\n      );\n    }\n  };\n\n  /** @private Called when the cut even happens in the iframe.\n   * Runs the copy method and then clears the cells.\n   * */\n  cut = (e) => {\n    if (this._editing) return;\n    this.copy(e);\n    this._setAllSelectedCellsTo(\"\");\n  };\n\n  keydown = (e) => {\n    if (e.ctrlKey) return;\n\n    if (this._selectionStart) {\n      if (e.key === \"Escape\" && this._editing) {\n        e.preventDefault();\n        this._revertEdit();\n        this._stopEditing();\n      }\n      if (e.key === \"Enter\") {\n        e.preventDefault();\n        this._tabCursorInSelection(false, e.shiftKey ? -1 : 1);\n      }\n\n      if (e.key === \"Tab\") {\n        e.preventDefault();\n        this._tabCursorInSelection(true, e.shiftKey ? -1 : 1);\n      }\n      if (!this._editing) {\n        if (e.key === \"Delete\" || e.key === \"Backspace\") {\n          e.preventDefault();\n          this._setAllSelectedCellsTo(\"\");\n        }\n        if (e.key === \"ArrowDown\") {\n          e.preventDefault();\n          this._moveCursor({ y: 1 }, e.shiftKey);\n        }\n\n        if (e.key === \"ArrowUp\") {\n          e.preventDefault();\n          this._moveCursor({ y: -1 }, e.shiftKey);\n        }\n        if (e.key === \"ArrowLeft\") {\n          e.preventDefault();\n          this._moveCursor({ x: -1 }, e.shiftKey);\n        }\n        if (e.key === \"ArrowRight\") {\n          e.preventDefault();\n          this._moveCursor({ x: +1 }, e.shiftKey);\n        }\n      }\n\n      if (e.key.length === 1 && !this._editing) {\n        this._changeSelectedCellsStyle(() => {\n          const { x, y } = this._focus;\n          // We clear the value of the cell, and the keyup event will\n          // happen with the cursor inside the cell and type the character there\n          this._startEditing({ x, y });\n          this._getCell(x, y).firstChild.value = \"\";\n        });\n      }\n    }\n  };\n\n  _setAllSelectedCellsTo(value) {\n    this._forSelectionCoord(this._selection, ({ x, y }) =>\n      this._setVal(x, y, value)\n    );\n    this._forSelectionCoord(this._selection, this._refreshDisplayedValue);\n\n    this._onDataChanged();\n  }\n\n  _moveCursor({ x = 0, y = 0 }, shiftSelectionEnd) {\n    const curr = shiftSelectionEnd ? this._selectionEnd : this._selectionStart;\n    const nc = { x: curr.x + x, y: curr.y + y };\n    if (!this._fitBounds(nc)) return;\n    this._stopEditing();\n    this._incrementToFit(nc);\n    this._changeSelectedCellsStyle(() => {\n      if (shiftSelectionEnd) {\n        this._selectionEnd = nc;\n      } else {\n        this._selectionStart = this._selectionEnd = this._focus = nc;\n      }\n    });\n    this._scrollIntoView(nc);\n  }\n\n  _tabCursorInSelection(horizontal, delta = 1) {\n    // if (this._selectionSize() <= 1) {\n    //   return this._moveCursor(horizontal? { x: delta, y: 0 }:{ x:0, y: delta });\n    // }\n    let { x, y } = this._focus || { x: 0, y: 0 };\n    const selectionSize = this._selectionSize();\n    const { rx, ry } =\n      selectionSize > 1\n        ? this._selection\n        : {\n            rx: [0, this._options.maxCols],\n            ry: [0, this._options.maxRows],\n          };\n\n    let nc;\n    if (horizontal) {\n      nc = _shift(x, y, delta, rx[0], rx[1] - 1, ry[0], ry[1] - 1);\n    } else {\n      // use the same logic, but with x and y inverted for the horizontal tabbing wiht enter/ shift enter\n      const temporaryCursor = _shift(\n        y,\n        x,\n        delta,\n        ry[0],\n        ry[1] - 1,\n        rx[0],\n        rx[1] - 1\n      );\n      nc = {\n        x: temporaryCursor.y,\n        y: temporaryCursor.x,\n      };\n    }\n\n    if (!this._fitBounds(nc)) return;\n    this._stopEditing();\n    this._incrementToFit(nc);\n    this._changeSelectedCellsStyle(() => {\n      this._focus = nc;\n      if (selectionSize <= 1) {\n        this._selectionStart = this._selectionEnd = nc;\n      }\n    });\n    this._scrollIntoView(nc);\n  }\n\n  _scrollIntoView({ x, y }) {\n    this._getCell(x, y).scrollIntoView({\n      behavior: \"smooth\",\n      block: \"nearest\",\n    });\n  }\n\n  _selecting = false;\n  _selectionStart = null;\n  _selectionEnd = null;\n  _selection = { rx: [0, 0], ry: [0, 0] };\n  _editing = null;\n  _focus = null;\n\n  mousedown = (e) => {\n    if (this.mobile) return;\n    if (e.which === 3 && !this._editing && this._selectionSize()) {\n      // select some text to make the browser offer the copy option\n      let range = new Range();\n      const { rx, ry } = this._selection;\n      range.setStart(this._getCell(rx[0], ry[0]), 0);\n      range.setEnd(this._getCell(rx[0], ry[0]), 1);\n      this.cwd.getSelection().removeAllRanges();\n      this.cwd.getSelection().addRange(range);\n\n      return;\n    }\n    this._changeSelectedCellsStyle(() => {\n      this.tbody.style.userSelect = \"none\";\n      this._selectionEnd = this._selectionStart = this._focus = this._getCoords(\n        e\n      );\n      this._selecting = true;\n    });\n  };\n  mouseenter = (e) => {\n    if (this.mobile) return;\n    if (this._selecting) {\n      this._changeSelectedCellsStyle(() => {\n        this._selectionEnd = this._getCoords(e);\n      });\n    }\n  };\n\n  _lastMouseUp = null;\n  _lastMouseUpTarget = null;\n\n  _endSelection() {\n    this._selecting = false;\n    this.tbody.style.userSelect = \"\";\n  }\n\n  mouseup = (e) => {\n    if (this.mobile) return;\n    if (e.which === 3) return;\n\n    if (this._selecting) {\n      this._changeSelectedCellsStyle(() => {\n        this._selectionEnd = this._getCoords(e);\n        this._endSelection();\n\n        if (\n          this._lastMouseUp &&\n          this._lastMouseUp > Date.now() - 300 &&\n          this._lastMouseUpTarget.x === this._selectionEnd.x &&\n          this._lastMouseUpTarget.y === this._selectionEnd.y\n        ) {\n          this._startEditing(this._selectionEnd);\n        }\n        this._lastMouseUp = Date.now();\n        this._lastMouseUpTarget = this._selectionEnd;\n      });\n    }\n  };\n  mouseleave = (e) => {\n    if (e.target === this.tbody && this._selecting) {\n      this._endSelection();\n    }\n  };\n\n  touchstart = (e) => {\n    if (this._editing) return;\n    this.mobile = true;\n    this.moved = false;\n  };\n  touchend = (e) => {\n    if (!this.mobile) return;\n    if (this._editing) return;\n    if (!this.moved) {\n      this._changeSelectedCellsStyle(() => {\n        this._selectionEnd = this._selectionStart = this._focus = this._getCoords(\n          e\n        );\n      });\n      this._startEditing(this._focus);\n    }\n  };\n  touchmove = (e) => {\n    if (!this.mobile) return;\n    this.moved = true;\n  };\n\n  _startEditing({ x, y }) {\n    this._editing = { x, y };\n    const td = this._getCell(x, y);\n    const tdSize = td.getBoundingClientRect();\n    const cellSize = td.firstChild.getBoundingClientRect();\n\n    Object.assign(td.style, {\n      width: tdSize.width - 2,\n      height: tdSize.height,\n    });\n\n    td.removeChild(td.firstChild);\n    const input = document.createElement(\"input\");\n    input.type = \"text\";\n    input.value = this._getVal(x, y);\n\n    Object.assign(input.style, {\n      width: cellSize.width,\n      height: cellSize.height,\n    });\n    td.appendChild(input);\n    input.focus();\n    input.addEventListener(\"blur\", this._stopEditing);\n    input.addEventListener(\"keydown\", this._blurIfEnter);\n  }\n\n  _destroyEditing() {\n    if (this._editing) {\n      const { x, y } = this._editing;\n      const input = this._getCell(x, y).firstChild;\n      input.removeEventListener(\"blur\", this._stopEditing);\n      input.removeEventListener(\"keydown\", this._blurIfEnter);\n    }\n  }\n\n  _revertEdit() {\n    if (!this._editing) return;\n    const { x, y } = this._editing;\n    const td = this._getCell(x, y);\n    const input = td.firstChild;\n    input.value = this._getVal(x, y);\n  }\n\n  _stopEditing = () => {\n    if (!this._editing) return;\n    const { x, y } = this._editing;\n    const td = this._getCell(x, y);\n    td.style.width = \"\";\n    td.style.height = \"\";\n    const input = td.firstChild;\n    input.removeEventListener(\"blur\", this._stopEditing);\n    input.removeEventListener(\"keydown\", this._blurIfEnter);\n    this._setVal(x, y, input.value);\n    td.removeChild(input);\n    this._editing = null;\n    this._renderTDContent(td, x, y);\n    this._onDataChanged();\n  };\n  _blurIfEnter = (e) => {\n    const code = e.keyCode;\n    if (code === 13) {\n      // enter\n      this._stopEditing();\n      e.preventDefault();\n    }\n  };\n\n  _changeSelectedCellsStyle(callback) {\n    const oldS = this._selection;\n    callback();\n    this._selection = this._getSelectionCoords();\n    this._forSelectionCoord(oldS, this._restyle);\n    this._forSelectionCoord(this._selection, this._restyle);\n  }\n\n  _getSelectionCoords() {\n    if (!this._selectionStart) return { rx: [0, 0], ry: [0, 0] };\n    let rx = [this._selectionStart.x, this._selectionEnd.x];\n    if (rx[0] > rx[1]) rx.reverse();\n    let ry = [this._selectionStart.y, this._selectionEnd.y];\n    if (ry[0] > ry[1]) ry.reverse();\n    return { rx: [rx[0], rx[1] + 1], ry: [ry[0], ry[1] + 1] };\n  }\n\n  _forSelectionCoord({ rx, ry }, cb) {\n    for (let x = rx[0]; x < rx[1]; x++)\n      for (let y = ry[0]; y < ry[1]; y++)\n        if (this._fitBounds({ x, y })) cb({ x, y });\n  }\n\n  _restyle = ({ x, y }) => {\n    this._getCell(x, y).className = this._classNames(x, y);\n  };\n\n  _selectionSize() {\n    const { rx, ry } = this._selection;\n    return (rx[1] - rx[0]) * (ry[1] - ry[0]);\n  }\n\n  _classNames(x, y) {\n    const { rx, ry } = this._selection;\n    let classes = \"\";\n    if (x >= rx[0] && x < rx[1] && y >= ry[0] && y < ry[1]) {\n      classes += \" selected\";\n      if (this._selectionSize() > 1) {\n        classes += \" multi\";\n      }\n    }\n\n    if (this._focus && this._focus.x === x && this._focus.y === y) {\n      classes += \" focus\";\n    }\n    if (this._editing && x === this._editing.x && y === this._editing.y) {\n      classes += \" editing\";\n    }\n\n    return classes;\n  }\n\n  _refreshDisplayedValue = ({ x, y }) => {\n    const div = this._getCell(x, y).firstChild;\n    if (div.tagName === \"DIV\") {\n      div.innerText = this._getVal(x, y);\n    }\n    this._restyle({ x, y });\n  };\n\n  _getCoords(e) {\n    // Returns the clicked cell coords or null\n    let node = e.target;\n    while (!node.getAttribute(\"x\") && node.parentElement) {\n      node = node.parentElement;\n    }\n    return {\n      x: parseInt(node.getAttribute(\"x\")) || 0,\n      y: parseInt(node.getAttribute(\"y\")) || 0,\n    };\n  }\n\n  /** Replace the current data with the provided 2D array.\n   * @param {[[String]]} data the new data, as a 2D array.\n   * */\n  setData(data) {\n    // Empty table\n    this._data._clear();\n    // paste data\n    this._replaceDataWithArray(data);\n\n    // Refresh all cell, including outide of the\n    // provided rect, as they've juste been emptied\n    for (let x = 0; x < this._width; x++)\n      for (let y = 0; y < this._height; y++)\n        this._refreshDisplayedValue({ x, y });\n  }\n\n  /**Returns the current data as a 2D array\n   * @return {[[String]]} data the latest data as a 2D array.\n   *\n   * */\n  getData() {\n    return this._data._toArr();\n  }\n\n  _replaceDataWithArray(data) {\n    data.forEach((line, y) => {\n      line.forEach((val, x) => {\n        this._setVal(x, y, val);\n      });\n    });\n  }\n\n  _setVal(x, y, val) {\n    if (!this._fitBounds({ x, y })) return;\n\n    this._data._setVal(x, y, val);\n    this._incrementToFit({ x: x + 1, y: y + 1 });\n    this._refreshDisplayedValue({ x, y });\n  }\n\n  _getVal(x, y) {\n    return this._data._getVal(x, y);\n  }\n\n  _getCell(x, y) {\n    return this.tbody.children[y].children[x];\n  }\n}\n\n\n\n\n","import Importabular from \"../src/index.js\";\nimport \"./demo.css\";\n\nwindow.sheet = new Importabular({\n  data: [\n    [\"Product ID\", \"Product name\", \"Price\", \"Unit\", \"Category\"],\n    [\"256\", \"Sample product\", \"2.5\", \"Piece\", \"Stuffs\"],\n    [\"122\", \"Pre mix drink\", \"5\", \"Bottle\", \"Drinks\"],\n  ],\n  node: document.getElementById(\"editorNode\"),\n  maxCols: 5,\n});\n\nconsole.info(`\n\nYou can play around with the instance on the page, try :\n\nsheet.getData()\nsheet.setData([['Hello','World']])\nsheet.destroy()\n\n`);\n\nArray.prototype.forEach.call(\n  document.getElementsByClassName(\"readable\"),\n  (n) => {\n    const pre = document.createElement(\"pre\");\n    pre.className = \"auto\";\n\n    let js = n.innerText\n      .trim()\n      .replace('from \"./dist/index.js\"', 'from \"importabular\"')\n      .replace('from \"./src/index.js\"', 'from \"importabular/src/index.js\"');\n\n    const lines = js.split(\"\\n\");\n    const offset = lines[1].match(/ +/)[0].length;\n    js = lines\n      .map((l, i) =>\n        i ? (l.slice(0, offset).trim() ? l.trim() : l.slice(offset)) : l\n      )\n      .join(\"\\n\");\n\n    pre.innerText = js;\n\n    n.parentElement.appendChild(pre);\n  }\n);\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}